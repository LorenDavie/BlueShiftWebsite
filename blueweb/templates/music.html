{% extends "secondary.html" %}

{% block page-title %}Music{% endblock page-title %}

{% block content %}
{% for release in releases %}
<div class="row">
    <div class="col">
        <h2>{{ release.title }}</h2>
        <p class="text-muted"><em>{{ release.release_date }}</em></p>
        {% if release.notes %}
        <p>{{ release.notes }}</p>
        {% endif %}
        {% if release.songs.exists %}
        <table class="table">
            {% for song in release.songs.all %}
                <tr>
                    <td><strong>{{ song }}</strong></td>
                    <td><a href="#" class="btn btn-sm btn-outline-primary show-lyric-btn" data-song-id="{{ song.pk }}">Lyrics</a></td>
                </tr>
                <tr class="d-none lyric-row" id="{{ song.pk }}-lyric-row">
                    <td colspan="2">
                        <div class="alert alert-light">
                            <pre>{{ song.lyrics}}</pre>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </table>
        {% else %}
        <p class="text-muted">No songs have been defined for this release yet.</p>
        {% endif %}
    </div>
</div>
{% endfor %}
{% endblock content %}

{% block bodyscripts %}
<script>
    $(function(){
       $('.show-lyric-btn').click(function(e){
           var song_id = $(this).attr('data-song-id');
           var lyric_row = $('#'+song_id+'-lyric-row');
           if (lyric_row.hasClass('d-none')) {
               lyric_row.removeClass('d-none');
           }
           else {
               lyric_row.addClass('d-none');
           }
           return false;
       });
    });
</script>
{% endblock bodyscripts %}